<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Desafio de Lógica com Pistas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    table {
      border-collapse: collapse;
      margin: 0 auto;
    }
    th, td {
      border: 1px solid #333;
      padding: 5px;
      text-align: center;
    }
    select {
      width: 130px;
    }
    .check-btn {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      background-color: #333;
      color: white;
      border: none;
      cursor: pointer;
    }
    .result {
      text-align: center;
      font-weight: bold;
      font-size: 18px;
      margin: 10px 0;
    }
    ul.pistas {
      max-width: 800px;
      margin: 20px auto;
      padding: 0;
      list-style: none;
    }
    ul.pistas li {
      margin: 5px 0;
      font-size: 16px;
    }
    .ok {
      color: green;
    }
    .fail {
      color: red;
    }
  </style>
</head>
<body>

<h1>Desafio de Lógica</h1>

<p style="text-align: center;">
  Complete a tabela e clique em "Verificar".
</p>

<table id="logicTable">
  <thead>
    <tr>
      <th>Categoria</th>
      <th>Casa 1</th>
      <th>Casa 2</th>
      <th>Casa 3</th>
      <th>Casa 4</th>
      <th>Casa 5</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Cor da Casa</td>
      <td><select id="color1" onchange="updateColumnColor(1)"></select></td>
      <td><select id="color2" onchange="updateColumnColor(2)"></select></td>
      <td><select id="color3" onchange="updateColumnColor(3)"></select></td>
      <td><select id="color4" onchange="updateColumnColor(4)"></select></td>
      <td><select id="color5" onchange="updateColumnColor(5)"></select></td>
    </tr>
    <tr>
      <td>Nome</td>
      <td><select id="name1"></select></td>
      <td><select id="name2"></select></td>
      <td><select id="name3"></select></td>
      <td><select id="name4"></select></td>
      <td><select id="name5"></select></td>
    </tr>
    <tr>
      <td>Bebida</td>
      <td><select id="drink1"></select></td>
      <td><select id="drink2"></select></td>
      <td><select id="drink3"></select></td>
      <td><select id="drink4"></select></td>
      <td><select id="drink5"></select></td>
    </tr>
    <tr>
      <td>Hobby</td>
      <td><select id="hobby1"></select></td>
      <td><select id="hobby2"></select></td>
      <td><select id="hobby3"></select></td>
      <td><select id="hobby4"></select></td>
      <td><select id="hobby5"></select></td>
    </tr>
    <tr>
      <td>Espécie</td>
      <td><select id="species1"></select></td>
      <td><select id="species2"></select></td>
      <td><select id="species3"></select></td>
      <td><select id="species4"></select></td>
      <td><select id="species5"></select></td>
    </tr>
  </tbody>
</table>

<button class="check-btn" onclick="checkSolution()">Verificar</button>

<div class="result" id="result"></div>

<h2 style="text-align: center;">Pistas</h2>
<ul class="pistas" id="pistasList">
  <!-- As pistas serão preenchidas dinamicamente -->
</ul>

<script>
  const colors = ["Vermelha", "Verde", "Branca", "Amarela", "Azul"];
  const names = ["Claudia", "Maíra", "Vanish", "Gustavo", "Wash"];
  const drinks = ["Cerveja", "Café", "Chá", "Vinho", "Limonada"];
  const hobbies = ["Ornitologia", "Jardinagem", "Leitura", "Fotografia", "Desenho"];
  const species = ["Lobisomem", "Humano", "Bruxa", "Vampiro", "Fada"];

  const colorMap = {
    "Vermelha": "#ff4c4c",
    "Verde": "#4cff4c",
    "Branca": "#ffffff",
    "Amarela": "#ffff66",
    "Azul": "#66b3ff"
  };

  const pistas = [
    "Claudia vive na casa Vermelha.",
    "Vanish é uma Fada.",
    "Maíra bebe Café.",
    "A casa Verde fica do lado esquerdo da casa Branca.",
    "Quem vive na casa Verde bebe Vinho.",
    "Quem pratica Bruxaria gosta de Leitura.",
    "Quem vive na casa Amarela é Ornitólogo.",
    "Quem vive na casa do centro bebe Chá.",
    "Wash vive na primeira casa.",
    "Quem pratica Jardinagem vive ao lado do Lobisomem.",
    "O ser Humano vive ao lado do Ornitólogo.",
    "Quem é Desenhista bebe Limonada.",
    "O Gustavo é Fotógrafo.",
    "Wash vive ao lado da casa Azul.",
    "Quem pratica Jardinagem é vizinho de quem bebe Cerveja."
  ];

  function fillSelect(id, options) {
    const sel = document.getElementById(id);
    const defaultOption = document.createElement("option");
    defaultOption.value = "";
    defaultOption.text = "Escolha";
    sel.add(defaultOption);
    options.forEach(opt => {
      const option = document.createElement("option");
      option.value = opt;
      option.text = opt;
      sel.add(option);
    });
  }

  for (let i = 1; i <= 5; i++) {
    fillSelect("color" + i, colors);
    fillSelect("name" + i, names);
    fillSelect("drink" + i, drinks);
    fillSelect("hobby" + i, hobbies);
    fillSelect("species" + i, species);
  }

  function getColumnValues(prefix) {
    return Array.from({length: 5}, (_, i) => document.getElementById(prefix + (i + 1)).value);
  }

  function isUnique(array) {
    return new Set(array.filter(e => e)).size === array.filter(e => e).length;
  }

  function updateColumnColor(column) {
    const table = document.getElementById("logicTable");
    const selectedColor = document.getElementById("color" + column).value;
    const colorHex = colorMap[selectedColor] || "#f2f2f2";

    for (let row = 1; row <= 5; row++) {
      table.rows[row].cells[column].style.backgroundColor = colorHex;
    }
  }

  function checkSolution() {
    const color = getColumnValues("color");
    const name = getColumnValues("name");
    const drink = getColumnValues("drink");
    const hobby = getColumnValues("hobby");
    const species = getColumnValues("species");

    const
      claudia = name.indexOf("Claudia"),
      maira = name.indexOf("Maíra"),
      vanish = name.indexOf("Vanish"),
      gustavo = name.indexOf("Gustavo"),
      wash = name.indexOf("Wash"),

      vermelha = color.indexOf("Vermelha"),
      verde = color.indexOf("Verde"),
      branca = color.indexOf("Branca"),
      amarela = color.indexOf("Amarela"),
      azul = color.indexOf("Azul"),

      cerveja = drink.indexOf("Cerveja"),
      cafe = drink.indexOf("Café"),
      cha = drink.indexOf("Chá"),
      vinho = drink.indexOf("Vinho"),
      limonada = drink.indexOf("Limonada"),

      ornitologia = hobby.indexOf("Ornitologia"),
      jardinagem = hobby.indexOf("Jardinagem"),
      leitura = hobby.indexOf("Leitura"),
      fotografia = hobby.indexOf("Fotografia"),
      desenho = hobby.indexOf("Desenho"),

      lobisomem = species.indexOf("Lobisomem"),
      humano = species.indexOf("Humano"),
      bruxa = species.indexOf("Bruxa"),
      vampiro = species.indexOf("Vampiro"),
      fada = species.indexOf("Fada");

    const adjacente = (a, b) => Math.abs(a - b) === 1;

    const regras = [
      claudia === vermelha,
      vanish === fada,
      maira === cafe,
      verde === branca - 1,
      verde === vinho,
      bruxa === leitura,
      amarela === ornitologia,
      cha === 2,
      wash === 0,
      adjacente(jardinagem, lobisomem),
      adjacente(humano, ornitologia),
      desenho === limonada,
      gustavo === fotografia,
      adjacente(wash, azul),
      adjacente(jardinagem, cerveja)
    ];

    // Validação se há repetições
    if (![color, name, drink, hobby, species].every(isUnique)) {
      document.getElementById("result").innerText = "Existem valores repetidos nas colunas!";
    } else if (regras.every(r => r)) {
      document.getElementById("result").innerText = "Parabéns! Solução correta!";
    } else {
      document.getElementById("result").innerText = "Ainda não está correto. Revise as pistas.";
    }

    // Atualiza visual das pistas
    const lista = document.getElementById("pistasList");
    lista.innerHTML = "";
    pistas.forEach((texto, i) => {
      const item = document.createElement("li");
      item.innerText = texto;
      item.className = regras[i] ? "ok" : "fail";
      lista.appendChild(item);
    });
  }
</script>

</body>
</html>
